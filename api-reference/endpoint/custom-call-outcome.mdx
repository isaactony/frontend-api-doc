---
title: "Custom Call Outcome"
openapi: "PATCH /calls/{agentId}/{callIdOrPhone}"
---

## Overview

This API allows you to update custom call outcome fields for calls by either:

1. **Call ID:** `PATCH /api/calls/{agent_id}/{call_id}`
2. **Phone Number:** `PATCH /api/calls/{agent_id}/{e164_number}?preference=first|last`

## Authentication

- **API Key**: `X-Authorization` header (for batch jobs)

---

## Example 1: Update by Call ID

### Using API Key

```bash
curl -X PATCH "https://app.phonely.ai/api/calls/agent123/call456" \
  -H "X-Authorization: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "custom_call_outcome": "Sold",
    "custom_call_outcome_value": 299,
    "custom_call_metadata": {
      "campaign": "spring_2026",
      "rep_id": "12345",
      "notes": "Customer was very interested"
    }
  }'
```

### Response (200 OK)

```json
{
  "success": true,
  "call_id": "call456",
  "agent_id": "agent123",
  "updated_fields": [
    "custom_call_outcome",
    "custom_call_outcome_value",
    "custom_call_metadata"
  ]
}
```

---

## Example 2: Update by Phone Number (Last Touch - Default)

### Using API Key

```bash
curl -X PATCH "https://app.phonely.ai/api/calls/agent123/+14155551234" \
  -H "X-Authorization: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "custom_call_outcome": "No Sale",
    "custom_call_outcome_value": 0,
    "custom_call_metadata": {
      "reason": "Price too high",
      "follow_up": true
    }
  }'
```

### Using Firebase Token

```bash
curl -X PATCH "https://app.phonely.ai/api/calls/agent123/+14155551234" \
  -H "Authorization: Bearer your-firebase-id-token" \
  -H "Content-Type: application/json" \
  -d '{
    "custom_call_outcome": "No Sale",
    "custom_call_outcome_value": 0
  }'
```

### Response (200 OK)

```json
{
  "success": true,
  "call_id": "call789",
  "agent_id": "agent123",
  "phone": "+14155551234",
  "preference": "last",
  "updated_fields": [
    "custom_call_outcome",
    "custom_call_outcome_value",
    "custom_call_metadata"
  ]
}
```

---

## Example 3: Update by Phone Number (First Touch)

### Using API Key

```bash
curl -X PATCH "https://app.phonely.ai/api/calls/agent123/+14155551234?preference=first" \
  -H "X-Authorization: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "custom_call_outcome": "Sold",
    "custom_call_outcome_value": 499,
    "custom_call_metadata": {
      "attribution": "first_touch",
      "campaign": "spring_2026"
    }
  }'
```

### Response (200 OK)

```json
{
  "success": true,
  "call_id": "call111",
  "agent_id": "agent123",
  "phone": "+14155551234",
  "preference": "first",
  "updated_fields": [
    "custom_call_outcome",
    "custom_call_outcome_value",
    "custom_call_metadata"
  ]
}
```

---

## Example 4: Partial Update (Only Outcome)

```bash
curl -X PATCH "https://app.phonely.ai/api/calls/agent123/call456" \
  -H "X-Authorization: your-api-key-here" \
  -H "Content-Type: application/json" \
  -d '{
    "custom_call_outcome": "Follow Up Required"
  }'
```

### Response (200 OK)

```json
{
  "success": true,
  "call_id": "call456",
  "agent_id": "agent123",
  "updated_fields": ["custom_call_outcome"]
}
```

---

## Notes

1. **Phone Number Format**: Phone numbers must be in E.164 format (e.g., `+14155551234`). The `+` sign can be included directly in the URL path.

2. **Preference Parameter**:
   - `first`: Updates the earliest call with the given phone number
   - `last`: Updates the most recent call (default)

3. **Partial Updates**: You can provide any combination of the three fields:
   - `custom_call_outcome` (string)
   - `custom_call_outcome_value` (number)
   - `custom_call_metadata` (object)
