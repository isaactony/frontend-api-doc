---
title: "Using Call Flows"
description: "Build complex conversations, connect with your tools and more with flows"
---

Flows are the visual blueprints that define exactly how your AI phone agent behaves, from the greeting, to data collection, to decisions, actions, and the final call outcome.\
They describe what the agent says, what it asks, what it stores, what APIs it calls, and how the conversation moves forward.                          

## What Are Flows?

Flows are made of several core elements:   

### 1. Blocks

Each block represents a single action or behavior, such as:

- Speaking to the caller
- Asking a question and capturing input
- Calling an API
- Making a decision based on conditions
- Transferring the call
- Ending the call.   

### 2. Connections (Edges)

Edges determine which path the call takes next.\
They can include:

- Simple transitions (always go to the next step)
- Conditional transitions (go to the next block only if a variable meets a condition)
- Confirmation requirements

### 3. Call Memory (Variables)

Variables store information during the call, such as:

- Caller-provided inputs.
- API responses.
- System-generated data (timestamp, outcomes, etc.)

They act as the agent’s short-term working memory for the duration of the call.

## Canvas Controls

Phonely includes several canvas tools to help you navigate and organize large workflows.

You’ll find tools for:

- Switching between **Hand Mode** (drag canvas) and **Pointer Mode** (select/move nodes)
- **Exporting** the flow as a PNG
- **Organizing nodes** into a cleaner layout
- **Undo/Redo** actions
- Viewing your **change history**

See the dedicated [Navigation & Editing Tools in the Flow Builder guide](/key-concepts/flow-canvas-controls) for more details.

## Core Concepts

### How to Create a Flow

1. Go to the agent design page.
1. Click the **\+** to create a new workflow or select an existing workflow and click the Edit button. 
2. **Add blocks. Click the “+” **button between existing blocks or at the end of a chain to insert a new block.         

<img
  src="/assets/adding-a-new-block-phonely.png"
  alt="Adding A New Block Phonely Pn"
  title="Adding A New Block Phonely Pn"
  style={{ width:"85%" }}
/>

**3. Configure a Block**

Click any block in your Flow to open its configuration panel.\
Each block contains different settings, and the options you see will depend on the type of block you’re setting up.

<Tip>
  Blocks have different setup and configuration requirements. For example, a Talk block includes questions and answers, Collect blocks include questions and variables, while API Request blocks include payload, headers, and response mapping.
</Tip>

<img
  src="/assets/how-to-configure-a-block.png"
  alt="How To Configure A Block Pn"
  title="How To Configure A Block Pn"
  style={{ width:"87%" }}
/>

**4. Connect blocks**\
When a new block is added, Phonely automatically creates a connection. You can change connections between blocks by hovering over an edge clicking the **X** button, and then place your cursor over the output node of one block and drag the edge to connect to the input node of another block.

**5. Edit an edge**

Hover over an edge and click the edit button to open the edit slide in panel. Here you can:

![How To Edit An Edge Pn](/assets/how-to-edit-an-edge.png)

- Specify the variables that must exist before allowing passage through this edge. The workflow will only proceed if all specified variables are present.
- Specify the variables that should be confirmed before allowing passage through this edge. The workflow will only proceed if all specified variables are confirmed.

**6. Save your changes**\
Every save creates a **new version** you can review or revert.

**7. Publish when ready**\
Publishing makes the version live for real callers.

## Call variables

<AccordionGroup>
  <Accordion title="What are call variables?">
    Variables are dynamic containers that persist for the duration of the call - like the agent's working memory.
  </Accordion>
  <Accordion title="How to set variables">
    Use Collect blocks for caller input, API Request blocks for external data, or add custom variables via the Variable modal.
  </Accordion>
  <Accordion title="How to access variables">
    Reference by name with @variable_name or select from the Variable modal. Use them in prompts, conditions, and API payloads.
  </Accordion>
</AccordionGroup>

### Variable types

Variables in Phonely can store different types of data. Choose the appropriate type when collecting information from callers or storing data from API responses.

| Type           | Data Type  | Description                                |
| :------------- | :--------- | :----------------------------------------- |
| **text**       | `string`   | General text                               |
| **number**     | `number`   | Numeric values                             |
| **date**       | `ISO date` | Dates in ISO format                        |
| **time**       | `HH:mm`    | Times in 24-hour format                    |
| **name**       | `string`   | Caller names                               |
| **email**      | `string`   | Email addresses                            |
| **phone**      | `string`   | Phone numbers                              |
| **url**        | `string`   | Web addresses                              |
| **address**    | `object`   | Street, city, region, postal code, country |
| **currency**   | `number`   | Monetary values                            |
| **percentage** | `number`   | Percent values                             |
| **duration**   | `string`   | Time spans                                 |
| **custom**     | `any`      | User-defined schema                        |

---

## Call outcome tagging.

<Info>
  Outcome tags enable analytics, reporting, and automations after the call ends.
</Info>

<Card title="Automatic">
  System applies defaults like `completed`, `failed`, `lead_qualified`, `appointment_schedule,` or `transferred`.
</Card>

<Card title="Custom">
  Set custom tags in End Call blocks for downstream workflows.
</Card>

<Card title="Conditional">
  Apply tags only when conditions on variables are met.
</Card>

<Tip>
  Some examples of tags that you can use include: **appointment_scheduled**, **lead_qualified,** **customer_satisfied, escalation_needed, no_show_followup**, etc.
</Tip>

---

## Testing & best practices

### Test your Flows

<Tabs>
  <Tab title="Simulation">
    <Steps>
      <Step title="Upload a recording">
        Validate recognition and branch logic with real audio.
      </Step>
      <Step title="Simulate variables">
        Seed test values for `@name`, `@phone`, etc.
      </Step>
      <Step title="Path testing">
        Walk each branch and confirm expected prompts.
      </Step>
      <Step title="Error testing">
        Force empty/malformed inputs to validate fallbacks.
      </Step>
    </Steps>
  </Tab>
  <Tab title="Live">
    <Steps>
      <Step title="Use test numbers">
        Route calls to non-production DIDs.
      </Step>
      <Step title="Monitor in real time">
        Watch transcripts and events in the dashboard.
      </Step>
      <Step title="Measure performance">
        Track response times, success rates, transfers.
      </Step>
      <Step title="A/B versions">
        Compare alternative prompts/flows.
      </Step>
    </Steps>
  </Tab>
</Tabs>

## Design guidelines

<AccordionGroup>
  <Accordion title="Conversation design">
    Keep prompts natural and concise, offer clear next steps, plan for interruptions, and confirm critical data before proceeding.
  </Accordion>
  <Accordion title="Technical hygiene">
    Test all branches, add fallback edges, watch performance metrics, and keep external dependencies resilient.
  </Accordion>
  <Accordion title="Variable management">
    Use descriptive names, validate inputs, handle missing data gracefully, and scrub sensitive data when not needed.
  </Accordion>
</AccordionGroup>

---

## Common patterns & workflows

<Tabs>
  <Tab title="Customer Service">
    <Steps>
      <Step title="Start & welcome">
        
      </Step>
      <Step title="Collect issue details">
        
      </Step>
      <Step title="Filter by issue type">
        
      </Step>
      <Step title="API request for account/order">
        
      </Step>
      <Step title="Provide resolution">
        
      </Step>
      <Step title="Confirm satisfaction">
        
      </Step>
      <Step title="Route to human if needed">
        
      </Step>
      <Step title="End with summary">
        
      </Step>
    </Steps>
  </Tab>
  <Tab title="Appointment Booking">
    <Steps>
      <Step title="Start & identify caller">
        
      </Step>
      <Step title="Collect preferences (date/time/location)">
        
      </Step>
      <Step title="API: check availability">
        
      </Step>
      <Step title="Confirm details with caller">
        
      </Step>
      <Step title="API: book appointment">
        
      </Step>
      <Step title="Send SMS confirmation">
        
      </Step>
      <Step title="End call">
        
      </Step>
    </Steps>
  </Tab>
  <Tab title="Lead Qualification">
    <Steps>
      <Step title="Start & introduce purpose">
        
      </Step>
      <Step title="Collect lead information">
        
      </Step>
      <Step title="Assess interest/fit">
        
      </Step>
      <Step title="Filter: qualified vs. nurture">
        
      </Step>
      <Step title="Transfer to sales when qualified">
        
      </Step>
      <Step title="End & follow-up">
        
      </Step>
    </Steps>
  </Tab>
</Tabs>

---

# Troubleshooting guide

<AccordionGroup>
  <Accordion title="Flow not responding">
    Verify block connections, confirm required variables are set, test blocks individually, and check API auth/endpoints.
  </Accordion>
  <Accordion title="Poor call quality">
    Review Talk block voice settings, try alternate voices, adjust rate and pauses, and check variable interpolation.
  </Accordion>
  <Accordion title="Transfer failures">
    Confirm destination numbers/agents, test fallbacks, and verify timing and availability windows.
  </Accordion>
  <Accordion title="Variable issues">
    Check spelling/case, ensure values are set before use, validate data types, and test prompts using variables.
  </Accordion>
  <Accordion title="API integration problems">
    Test endpoints in isolation, verify credentials and headers, confirm request/response schemas, and watch rate limits/timeouts.
  </Accordion>
</AccordionGroup>

---

# Conclusion

You now have the essentials to design reliable, natural AI phone experiences:

- Start simple, iterate quickly.
- Integrate systems as needed.
- Test rigorously and monitor outcomes.

<Steps>
  <Step title="Start simple">
    Build with Start Call,Talk, and End Call
  </Step>
  <Step title="Add interaction">
    Use Collect and Question blocks.
  </Step>
  <Step title="Integrate systems">
    Add API Request and conditional edges.
  </Step>
  <Step title="Optimize">
    Use Filter and Time Filter to route intelligently.
  </Step>
  <Step title="Test thoroughly">
    Apply simulation and live testing practices above.
  </Step>
</Steps>