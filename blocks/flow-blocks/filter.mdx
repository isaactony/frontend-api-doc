---
title: "Filter"
description: "Route conversation based on conditions and create dynamic conversation paths"
---

## What is the Filter Block?

The Filter block in Phonely allows you to split your call flow based on conditions. Think of it as a decision-making point that checks if certain criteria are met, like whether the caller’s name matches a specific value, or if a collected variable exists, and then routes the call accordingly.

This helps you create personalized, dynamic, and logic-based flows where outcomes depend on user input, call data, or system variables.

## Key Use Cases

Here are common scenarios where the Filter block is useful:

1. **Routing Based on Caller Type:** Direct callers to different paths depending on who they are. For example, If caller_type = existing_customer, route to Account Manager; otherwise, to Sales Intake.
2. **Time-Based Call Handling:** Handle calls differently based on time or day

   For example, If current_time is after 6 PM, route to After-Hours Voicemail; else continue to Live Agent.
3. **Service Level Routing:** Serve customers according to their plan or service tier.

   For example, If plan_type = Premium, send to Priority Support; if not, route to Standard Support.
4. **Geographic Routing:** Route calls based on caller location or language preference.

   For example, If caller_country = USA, connect to US Team; if caller_country = South Africa, route to Cape Town Team.
5. **Priority-Based Escalation:** Automatically escalate high-priority or urgent cases.

   For example, If ticket_urgency = High and customer_status = VIP, route to Escalation Queue.

## Understanding How It Works

When the Filter block is added to your flow:

- It evaluates one or more conditions using variables and comparison rules.
- Each condition returns either **True** or **False**.
- Based on the outcome:
  - **True path** \> Executes the next connected block when all/any conditions are met.
  - **False path** \> Executes the next block when conditions fail.

![Filter Block Pn](/assets/filter-block.png)

So, you can visually branch your automation into multiple directions depending on call or data logic.

## How to Set Up a Filter Block

Let’s walk through every part of the setup shown in your screenshots.

<Steps>
  <Step title="Add the Filter Block" titleSize="h3">
    1. In your flow, click the **“+”** icon after any existing block.
    2. Under **Flow Actions**, choose **Filter**.
    3. The Filter block will appear with two output paths — **True** and **False**.
  </Step>
  <Step title="Define Your Conditions" titleSize="h3">
    Each condition is a rule that tells Phonely what to check.

    1. Click the Filter block to open its configuration panel.
    2. Under **Conditions**, click into **Condition 1**.
    3. You’ll see three main fields:

    | Field                             | Description                                                                                                                                            |
    | :-------------------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------- |
    | **Define Field**                  | The variable or data point you want to evaluate (e.g., `caller_phone`, `customer_name`, `response`).                                                   |
    | **Comparison Operator**           | Defines how the field is compared — options include: <br />• `exists` <br />• `is equal to` <br />• `is not equal to` <br />• `is an array containing` |
    | **Value Type & Comparison Value** | Select data type (`String`, `Number`, or `Boolean`) and specify the value to compare against.                                                          |
  </Step>
  <Step title=" Choose Available Variables" titleSize="h3">
    Click inside Define Field, this opens the Available Variables panel.

    Here you’ll find:

    - **Call Variables** – System-generated details like caller ID, phone number, or call metadata.
    - **Custom Variables** – Variables you’ve defined manually.
    - **Auto-Gather Variables (Beta)** – Prompts the caller at the moment a block needs a value (name, email, date, etc.)—no extra Talk block required.
    - **Collect Caller Details** – Inputs from Collect or Ask Exactly blocks (e.g., `caller_name`, `caller_phone`).
  </Step>
  <Step title="Select the Comparison Operator" titleSize="h3">
    Click the dropdown that says **“is equal to”** to see other options:

    - **exists** \> Checks if a variable exists or is defined.
    - **is equal to** \> Compares for equality.
    - **is not equal to** \> Checks inequality.
    - **is an array containing** \> Used when working with list-type variables.

    Choose one that fits your logic.

    <Tip>
      For example:

      - Use `exists` to ensure a phone number is collected.
      - Use `is equal to` to match a user’s choice.
    </Tip>
  </Step>
  <Step title="Select the Data Type" titleSize="h3">
    Under the comparison dropdown, click the small menuand choose the correct type:

    | Data Type   | When to Use                                         |
    | :---------- | :-------------------------------------------------- |
    | **String**  | For text values like names or words.                |
    | **Number**  | For numeric comparisons like age, amount, or count. |
    | **Boolean** | For true/false logic (e.g., `is_verified = true`).  |

    Then enter your comparison value.
  </Step>
  <Step title="Add Multiple Conditions" titleSize="h3">
    To check multiple rules:

    1. Click **➕ Add Condition** to create a new condition.
    2. Each added condition can check a separate variable or logic path.

    Now, choose your **Logic Operator**:

    | Logic Option | Description                                                  |
    | :----------- | :----------------------------------------------------------- |
    | **And**      | All conditions must be true to continue along the True path. |
    | **Or**       | Only one condition must be true to continue.                 |

    For example:

    - **And** \> `caller_name = John` **and** `caller_phone = 123456`
    - **Or** \> `caller_name = John` **or** `caller_name = Jane`
  </Step>
  <Step title="Configure Advanced Settings" titleSize="h3">
    Scroll down to **Advanced Settings**.

    Here’s what you can adjust:

    #### Interim Message

    Enable this if you want to play a message to the caller while Phonely checks the conditions.

    - **Post Interim Message Delay:** Adds a short delay before continuing.
    - **Interim Message Prompt:** You can write or auto-generate a 3–7 word message such as _“Please hold while I check_” or _“Verifying your input.”_

    #### Call Outcome Tagging

    Optionally, add a **keyword tag** to label this flow’s result (e.g., `validated`, `invalid_number`). This helps track call outcomes later in reports or analytics.
  </Step>
  <Step title="Save the Filter" titleSize="h3">
    Click **Done** to confirm and exit.

    Once done:

    - The block shows **True** and **False** outputs.
    - Connect the **True** path to actions to perform if all conditions pass.
    - Connect the **False** path to fallback or error handling actions.

    ## Example: Using Variables in Filter Logic

    Let’s say your **Collect block** gathered two inputs from the caller:

    - `caller_phone`
    - `caller_zip_code`

    You can then use a **Filter block** to determine which store location the caller should be routed to based on these values.

    **Example conditions:**

    - **Condition 1:** `caller_phone` starts with **"+1-312"** _(Chicago area code)_
    - **Condition 2:** `caller_zip_code` is equal to **"60601"** _(Downtown Chicago ZIP code)_

    Set **Logic** to **And**.

    \> **If both conditions are true**, the flow continues through the **True** branch — for example, routing the caller to the **Chicago Downtown Store** or triggering an **API Request** to fetch store details in that ZIP code area.

    \> **If not**, the flow follows the **False** branch — for example, playing a message such as:

    > “Sorry, we couldn’t find a nearby store based on your location. Please check your ZIP code and try again.”
  </Step>
</Steps>